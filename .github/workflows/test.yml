name: Test webserv

on: [push, pull_request]

jobs:
  build-and-test:
    runs-on: macos-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Build project
      run: make

    - name: Start web server
      run: ./webserv &
      continue-on-error: true

    - name: Execute tester
      run: |
            { echo; echo; echo; echo; echo; echo; echo; echo; } | ./tester http://localhost:80
